// weapons_catalog.js
(() => {
  const W = (window.WeaponCatalog = window.WeaponCatalog || {});
  W.weapons = Array.isArray(W.weapons) ? W.weapons : [];

  function upsert(def) {
    const idx = W.weapons.findIndex((x) => x.id === def.id);
    if (idx >= 0) W.weapons[idx] = def;
    else W.weapons.push(def);
  }

  upsert({
    id: 'pistol',
    name: 'Pulse Pistol',
    description: 'Balanced sidearm. Reliable at all ranges.',
    kind: 'bullet',
    props: {},
    magSize: 14,
    reloadSeconds: 1.15,
    swapOutSeconds: 0.22,
    swapInSeconds: 0.18,
    stats: {
      damage: 1.0,
      fireCooldown: 0.19,
      bulletSpeed: 900,
      bulletTTL: 1.15,
      multishot: 1,
      spread: 0.03,
      pierce: 0,
      bounce: 0,
      homing: 0,
      critChance: 0.05,
      critMult: 1.8,
      explosiveChance: 0,
      explosiveRadius: 120,
      burnDps: 0,
      burnDuration: 0,
      poisonDps: 0,
      poisonDuration: 0,
      slowChance: 0,
      slowPercent: 0,
      slowDuration: 0,
      knockback: 0,
    },
  });

  upsert({
    id: 'smg',
    name: 'Rivet SMG',
    description: 'High rate of fire with controllable spread. Excellent for close-mid range.',
    kind: 'bullet',
    props: {},
    magSize: 30,
    reloadSeconds: 1.35,
    swapOutSeconds: 0.26,
    swapInSeconds: 0.20,
    stats: {
      damage: 0.72,
      fireCooldown: 0.09,
      bulletSpeed: 880,
      bulletTTL: 1.0,
      multishot: 1,
      spread: 0.05,
      pierce: 0,
      bounce: 0,
      homing: 0,
      critChance: 0.03,
      critMult: 1.6,
      explosiveChance: 0,
      explosiveRadius: 120,
      burnDps: 0,
      burnDuration: 0,
      poisonDps: 0,
      poisonDuration: 0,
      slowChance: 0,
      slowPercent: 0,
      slowDuration: 0,
      knockback: 0,
    },
  });

  upsert({
    id: 'shotgun',
    name: 'Scrap Shotgun',
    description: 'Wide spread, heavy swap and reload. Great for crowd control.',
    kind: 'bullet',
    props: { pelletCount: 5 },
    magSize: 6,
    reloadSeconds: 1.55,
    swapOutSeconds: 0.35,
    swapInSeconds: 0.28,
    stats: {
      damage: 0.75,
      fireCooldown: 0.62,
      bulletSpeed: 760,
      bulletTTL: 0.92,
      multishot: 5,
      spread: 0.18,
      pierce: 0,
      bounce: 0,
      homing: 0,
      critChance: 0.04,
      critMult: 1.7,
      explosiveChance: 0,
      explosiveRadius: 140,
      burnDps: 0,
      burnDuration: 0,
      poisonDps: 0,
      poisonDuration: 0,
      slowChance: 0,
      slowPercent: 0,
      slowDuration: 0,
      knockback: 120,
    },
  });

  upsert({
    id: 'burst',
    name: 'Burst Rifle',
    description: 'Controlled burst fire. Rewards timing.',
    kind: 'burst',
    props: { burstCount: 3, burstInterval: 0.06 },
    magSize: 18,
    reloadSeconds: 1.35,
    swapOutSeconds: 0.30,
    swapInSeconds: 0.24,
    stats: {
      damage: 0.9,
      fireCooldown: 0.42,
      bulletSpeed: 980,
      bulletTTL: 1.18,
      multishot: 1,
      spread: 0.02,
      pierce: 0,
      bounce: 0,
      homing: 0,
      critChance: 0.05,
      critMult: 1.75,
      explosiveChance: 0,
      explosiveRadius: 120,
      burnDps: 0,
      burnDuration: 0,
      poisonDps: 0,
      poisonDuration: 0,
      slowChance: 0,
      slowPercent: 0,
      slowDuration: 0,
      knockback: 35,
    },
  });

  upsert({
    id: 'sniper',
    name: 'Rail Sniper',
    description: 'Slow cadence, heavy hits, very fast projectiles.',
    kind: 'bullet',
    props: {},
    magSize: 5,
    reloadSeconds: 1.75,
    swapOutSeconds: 0.42,
    swapInSeconds: 0.34,
    stats: {
      damage: 2.6,
      fireCooldown: 0.85,
      bulletSpeed: 1650,
      bulletTTL: 1.25,
      multishot: 1,
      spread: 0.008,
      pierce: 1,
      bounce: 0,
      homing: 0,
      critChance: 0.08,
      critMult: 2.2,
      explosiveChance: 0,
      explosiveRadius: 140,
      burnDps: 0,
      burnDuration: 0,
      poisonDps: 0,
      poisonDuration: 0,
      slowChance: 0,
      slowPercent: 0,
      slowDuration: 0,
      knockback: 160,
    },
  });

  upsert({
    id: 'laser',
    name: 'Laser Emitter',
    description: 'Sustained beam damage (implemented in later build).',
    kind: 'beam',
    props: { beamRange: 520, beamWidth: 14, tickRate: 14 },
    magSize: 60,
    reloadSeconds: 1.65,
    swapOutSeconds: 0.34,
    swapInSeconds: 0.28,
    stats: {
      damage: 0.42,
      fireCooldown: 0.07,
      bulletSpeed: 1100,
      bulletTTL: 0.85,
      multishot: 1,
      spread: 0.01,
      pierce: 2,
      bounce: 0,
      homing: 0,
      critChance: 0.02,
      critMult: 1.5,
      explosiveChance: 0,
      explosiveRadius: 120,
      burnDps: 0,
      burnDuration: 0,
      poisonDps: 0,
      poisonDuration: 0,
      slowChance: 0,
      slowPercent: 0,
      slowDuration: 0,
      knockback: 0,
    },
  });

  upsert({
    id: 'rocket',
    name: 'Rocket Launcher',
    description: 'Slow, heavy splash damage (implemented in later build).',
    kind: 'explosive',
    props: { explodeRadius: 160, explodeDamageMul: 1.0, explodeOnHit: true },
    magSize: 3,
    reloadSeconds: 2.05,
    swapOutSeconds: 0.55,
    swapInSeconds: 0.45,
    stats: {
      damage: 3.2,
      fireCooldown: 1.05,
      bulletSpeed: 620,
      bulletTTL: 1.25,
      multishot: 1,
      spread: 0.01,
      pierce: 0,
      bounce: 0,
      homing: 0,
      critChance: 0.03,
      critMult: 1.8,
      explosiveChance: 1.0,
      explosiveRadius: 160,
      burnDps: 0,
      burnDuration: 0,
      poisonDps: 0,
      poisonDuration: 0,
      slowChance: 0,
      slowPercent: 0,
      slowDuration: 0,
      knockback: 260,
    },
  });

  upsert({
    id: 'grenade',
    name: 'Grenade Lobber',
    description: 'Arcing explosives with large area control (implemented in later build).',
    kind: 'explosive',
    props: { explodeRadius: 190, explodeDamageMul: 0.85, explodeOnHit: true, arc: true },
    magSize: 5,
    reloadSeconds: 1.95,
    swapOutSeconds: 0.48,
    swapInSeconds: 0.38,
    stats: {
      damage: 2.4,
      fireCooldown: 0.9,
      bulletSpeed: 560,
      bulletTTL: 1.55,
      multishot: 1,
      spread: 0.03,
      pierce: 0,
      bounce: 0,
      homing: 0,
      critChance: 0.03,
      critMult: 1.7,
      explosiveChance: 1.0,
      explosiveRadius: 190,
      burnDps: 0,
      burnDuration: 0,
      poisonDps: 0,
      poisonDuration: 0,
      slowChance: 0,
      slowPercent: 0,
      slowDuration: 0,
      knockback: 230,
    },
  });

  upsert({
    id: 'flame',
    name: 'Flamethrower',
    description: 'Short-range cone with damage-over-time (implemented in later build).',
    kind: 'flame',
    props: { flameRange: 250, flameCone: 0.7, tickRate: 12 },
    magSize: 80,
    reloadSeconds: 1.8,
    swapOutSeconds: 0.38,
    swapInSeconds: 0.30,
    stats: {
      damage: 0.28,
      fireCooldown: 0.06,
      bulletSpeed: 800,
      bulletTTL: 0.55,
      multishot: 1,
      spread: 0.22,
      pierce: 0,
      bounce: 0,
      homing: 0,
      critChance: 0.0,
      critMult: 1.5,
      explosiveChance: 0,
      explosiveRadius: 120,
      burnDps: 1.2,
      burnDuration: 1.2,
      poisonDps: 0,
      poisonDuration: 0,
      slowChance: 0.05,
      slowPercent: 0.18,
      slowDuration: 0.7,
      knockback: 40,
    },
  });

  upsert({
    id: 'arc',
    name: 'Arc Coil',
    description: 'Chains damage between nearby targets (implemented in later build).',
    kind: 'arc',
    props: { chainCount: 3, chainRange: 170, arcRange: 360 },
    magSize: 22,
    reloadSeconds: 1.6,
    swapOutSeconds: 0.36,
    swapInSeconds: 0.30,
    stats: {
      damage: 0.95,
      fireCooldown: 0.32,
      bulletSpeed: 950,
      bulletTTL: 0.95,
      multishot: 1,
      spread: 0.02,
      pierce: 0,
      bounce: 0,
      homing: 0,
      critChance: 0.04,
      critMult: 1.8,
      explosiveChance: 0,
      explosiveRadius: 120,
      burnDps: 0,
      burnDuration: 0,
      poisonDps: 0,
      poisonDuration: 0,
      slowChance: 0.0,
      slowPercent: 0,
      slowDuration: 0,
      knockback: 55,
    },
  });

  upsert({
    id: 'railgun',
    name: 'Railgun',
    description: 'Charge to fire a piercing line shot (implemented in later build).',
    kind: 'charge',
    props: { chargeSeconds: 0.85, minCharge: 0.25, maxChargeMult: 2.2, railRange: 900, railWidth: 10 },
    magSize: 7,
    reloadSeconds: 1.85,
    swapOutSeconds: 0.50,
    swapInSeconds: 0.40,
    stats: {
      damage: 2.2,
      fireCooldown: 0.85,
      bulletSpeed: 1400,
      bulletTTL: 1.3,
      multishot: 1,
      spread: 0.005,
      pierce: 2,
      bounce: 0,
      homing: 0,
      critChance: 0.06,
      critMult: 2.1,
      explosiveChance: 0,
      explosiveRadius: 140,
      burnDps: 0,
      burnDuration: 0,
      poisonDps: 0,
      poisonDuration: 0,
      slowChance: 0,
      slowPercent: 0,
      slowDuration: 0,
      knockback: 240,
    },
  });

  upsert({
    id: 'boomerang',
    name: 'Boomerang Blade',
    description: 'A returning projectile that rewards positioning (implemented in later build).',
    kind: 'boomerang',
    props: { outSeconds: 0.35, returnSpeedMul: 1.3, hitCooldown: 0.12 },
    magSize: 1,
    reloadSeconds: 0.25,
    swapOutSeconds: 0.30,
    swapInSeconds: 0.26,
    stats: {
      damage: 1.35,
      fireCooldown: 0.42,
      bulletSpeed: 920,
      bulletTTL: 1.35,
      multishot: 1,
      spread: 0.02,
      pierce: 99,
      bounce: 0,
      homing: 0,
      critChance: 0.05,
      critMult: 1.9,
      explosiveChance: 0,
      explosiveRadius: 120,
      burnDps: 0,
      burnDuration: 0,
      poisonDps: 0,
      poisonDuration: 0,
      slowChance: 0,
      slowPercent: 0,
      slowDuration: 0,
      knockback: 120,
    },
  });
})();
